---
title: "Что нужно для создания внешнего ключа(FOREIGN KEY) в MySQL"
tags: "foreing key,mysql,phpmyadmin,sql"
date: "2012-07-15"
---

Все или почти все слышали что есть такое понятие как **внешний ключ**, но не все его умеют использовать. Поэтому я выкину теорию "зачем это нужно" и "на сколько это полезно" и сразу перейду к практике. Давайте разберемся что нам необходимо для создания внешнего ключа в MySQL:

1\. Движок(engine) обеих связываемых таблиц должен быть **InnoDB.**

2\. Связываемые поля должны быть **проиндексированы** и иметь **один тип** ( размер и знак должен быть один )

Из основного это все.

Теперь синтаксис взятый из официального мануала:

[CONSTRAINT [_`symbol`_]] FOREIGN KEY
    [_`index_name`_] (_`index_col_name`_, ...)
    REFERENCES _`tbl_name`_ (_`index_col_name`_,...)
    [ON DELETE _`reference_option`_]
    [ON UPDATE _`reference_option`_]

_`reference_option`_:
    RESTRICT | CASCADE | SET NULL | NO ACTION

Где:

_`symbol`_ - имя ключа
_`index_name`_ - имя поля в таблице, которое мы хотим сделать ключом _`tbl_name - таблица, с которой осуществляем связывание index_col_name - имя поля, с которым связываем наш ключ reference_option - какое действие осуществляем в случае чего`_

Для пользователей **phpmyadmin** все это можно осуществить кнопочкой **Relation view** в структуре таблицы, в которой хотим задать внешний ключ.

![](images/foreingkey-300x57.png "foreingkey")

Дальше только выбрать что мы с чем хотим связать и какие действия выполнять в случае удаления или обновления одной записи из связки.
